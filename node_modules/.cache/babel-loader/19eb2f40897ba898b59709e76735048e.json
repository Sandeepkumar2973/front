{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"prefixCls\", \"src\", \"alt\", \"onClose\", \"visible\", \"icons\", \"rootClassName\", \"getContainer\", \"countRender\", \"scaleStep\", \"transitionName\", \"maskTransitionName\"];\nimport classnames from 'classnames';\nimport Dialog from 'rc-dialog';\nimport addEventListener from \"rc-util/es/Dom/addEventListener\";\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport { warning } from \"rc-util/es/warning\";\nimport React, { useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport getFixScaleEleTransPosition from \"./getFixScaleEleTransPosition\";\nimport useImageTransform from \"./hooks/useImageTransform\";\nimport Operations from \"./Operations\";\nimport { BASE_SCALE_RATIO, WHEEL_MAX_SCALE_RATIO } from \"./previewConfig\";\nimport { context } from \"./PreviewGroup\";\n\nvar Preview = function Preview(props) {\n  var prefixCls = props.prefixCls,\n      src = props.src,\n      alt = props.alt,\n      onClose = props.onClose,\n      visible = props.visible,\n      _props$icons = props.icons,\n      icons = _props$icons === void 0 ? {} : _props$icons,\n      rootClassName = props.rootClassName,\n      getContainer = props.getContainer,\n      countRender = props.countRender,\n      _props$scaleStep = props.scaleStep,\n      scaleStep = _props$scaleStep === void 0 ? 0.5 : _props$scaleStep,\n      _props$transitionName = props.transitionName,\n      transitionName = _props$transitionName === void 0 ? 'zoom' : _props$transitionName,\n      _props$maskTransition = props.maskTransitionName,\n      maskTransitionName = _props$maskTransition === void 0 ? 'fade' : _props$maskTransition,\n      restProps = _objectWithoutProperties(props, _excluded);\n\n  var imgRef = useRef();\n  var downPositionRef = useRef({\n    deltaX: 0,\n    deltaY: 0,\n    transformX: 0,\n    transformY: 0\n  });\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isMoving = _useState2[0],\n      setMoving = _useState2[1];\n\n  var _useContext = useContext(context),\n      previewUrls = _useContext.previewUrls,\n      current = _useContext.current,\n      isPreviewGroup = _useContext.isPreviewGroup,\n      setCurrent = _useContext.setCurrent;\n\n  var previewGroupCount = previewUrls.size;\n  var previewUrlsKeys = Array.from(previewUrls.keys());\n  var currentPreviewIndex = previewUrlsKeys.indexOf(current);\n  var combinationSrc = isPreviewGroup ? previewUrls.get(current) : src;\n  var showLeftOrRightSwitches = isPreviewGroup && previewGroupCount > 1;\n  var showOperationsProgress = isPreviewGroup && previewGroupCount >= 1;\n\n  var _useImageTransform = useImageTransform(imgRef),\n      transform = _useImageTransform.transform,\n      resetTransform = _useImageTransform.resetTransform,\n      updateTransform = _useImageTransform.updateTransform,\n      dispatchZoomChange = _useImageTransform.dispatchZoomChange;\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      enableTransition = _useState4[0],\n      setEnableTransition = _useState4[1];\n\n  var rotate = transform.rotate,\n      scale = transform.scale;\n  var wrapClassName = classnames(_defineProperty({}, \"\".concat(prefixCls, \"-moving\"), isMoving));\n  useEffect(function () {\n    if (!enableTransition) {\n      setEnableTransition(true);\n    }\n  }, [enableTransition]);\n\n  var onAfterClose = function onAfterClose() {\n    resetTransform();\n  };\n\n  var onZoomIn = function onZoomIn() {\n    dispatchZoomChange(BASE_SCALE_RATIO + scaleStep);\n  };\n\n  var onZoomOut = function onZoomOut() {\n    dispatchZoomChange(BASE_SCALE_RATIO - scaleStep);\n  };\n\n  var onRotateRight = function onRotateRight() {\n    updateTransform({\n      rotate: rotate + 90\n    });\n  };\n\n  var onRotateLeft = function onRotateLeft() {\n    updateTransform({\n      rotate: rotate - 90\n    });\n  };\n\n  var onFlipX = function onFlipX() {\n    updateTransform({\n      flipX: !transform.flipX\n    });\n  };\n\n  var onFlipY = function onFlipY() {\n    updateTransform({\n      flipY: !transform.flipY\n    });\n  };\n\n  var onSwitchLeft = function onSwitchLeft(event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (currentPreviewIndex > 0) {\n      setEnableTransition(false);\n      resetTransform();\n      setCurrent(previewUrlsKeys[currentPreviewIndex - 1]);\n    }\n  };\n\n  var onSwitchRight = function onSwitchRight(event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (currentPreviewIndex < previewGroupCount - 1) {\n      setEnableTransition(false);\n      resetTransform();\n      setCurrent(previewUrlsKeys[currentPreviewIndex + 1]);\n    }\n  };\n\n  var onMouseUp = function onMouseUp() {\n    if (visible && isMoving) {\n      setMoving(false);\n      /** No need to restore the position when the picture is not moved, So as not to interfere with the click */\n\n      var _downPositionRef$curr = downPositionRef.current,\n          transformX = _downPositionRef$curr.transformX,\n          transformY = _downPositionRef$curr.transformY;\n      var hasChangedPosition = transform.x !== transformX && transform.y !== transformY;\n\n      if (!hasChangedPosition) {\n        return;\n      }\n\n      var width = imgRef.current.offsetWidth * scale;\n      var height = imgRef.current.offsetHeight * scale; // eslint-disable-next-line @typescript-eslint/no-shadow\n\n      var _imgRef$current$getBo = imgRef.current.getBoundingClientRect(),\n          left = _imgRef$current$getBo.left,\n          top = _imgRef$current$getBo.top;\n\n      var isRotate = rotate % 180 !== 0;\n      var fixState = getFixScaleEleTransPosition(isRotate ? height : width, isRotate ? width : height, left, top);\n\n      if (fixState) {\n        updateTransform(_objectSpread({}, fixState));\n      }\n    }\n  };\n\n  var onMouseDown = function onMouseDown(event) {\n    // Only allow main button\n    if (event.button !== 0) return;\n    event.preventDefault();\n    event.stopPropagation();\n    downPositionRef.current = {\n      deltaX: event.pageX - transform.x,\n      deltaY: event.pageY - transform.y,\n      transformX: transform.x,\n      transformY: transform.y\n    };\n    setMoving(true);\n  };\n\n  var onMouseMove = function onMouseMove(event) {\n    if (visible && isMoving) {\n      updateTransform({\n        x: event.pageX - downPositionRef.current.deltaX,\n        y: event.pageY - downPositionRef.current.deltaY\n      });\n    }\n  };\n\n  var onWheel = function onWheel(event) {\n    if (!visible || event.deltaY == 0) return; // Scale ratio depends on the deltaY size\n\n    var scaleRatio = Math.abs(event.deltaY / 100); // Limit the maximum scale ratio\n\n    var mergedScaleRatio = Math.min(scaleRatio, WHEEL_MAX_SCALE_RATIO); // Scale the ratio each time\n\n    var ratio = BASE_SCALE_RATIO + mergedScaleRatio * scaleStep;\n\n    if (event.deltaY > 0) {\n      ratio = BASE_SCALE_RATIO / ratio;\n    }\n\n    dispatchZoomChange(ratio, event.clientX, event.clientY);\n  };\n\n  var onKeyDown = useCallback(function (event) {\n    if (!visible || !showLeftOrRightSwitches) return;\n\n    if (event.keyCode === KeyCode.LEFT) {\n      if (currentPreviewIndex > 0) {\n        setCurrent(previewUrlsKeys[currentPreviewIndex - 1]);\n      }\n    } else if (event.keyCode === KeyCode.RIGHT) {\n      if (currentPreviewIndex < previewGroupCount - 1) {\n        setCurrent(previewUrlsKeys[currentPreviewIndex + 1]);\n      }\n    }\n  }, [currentPreviewIndex, previewGroupCount, previewUrlsKeys, setCurrent, showLeftOrRightSwitches, visible]);\n\n  var onDoubleClick = function onDoubleClick(event) {\n    if (visible) {\n      if (scale !== 1) {\n        updateTransform({\n          x: 0,\n          y: 0,\n          scale: 1\n        });\n      } else {\n        dispatchZoomChange(BASE_SCALE_RATIO + scaleStep, event.clientX, event.clientY);\n      }\n    }\n  };\n\n  useEffect(function () {\n    var onTopMouseUpListener;\n    var onTopMouseMoveListener;\n    var onMouseUpListener = addEventListener(window, 'mouseup', onMouseUp, false);\n    var onMouseMoveListener = addEventListener(window, 'mousemove', onMouseMove, false);\n    var onKeyDownListener = addEventListener(window, 'keydown', onKeyDown, false);\n\n    try {\n      // Resolve if in iframe lost event\n\n      /* istanbul ignore next */\n      if (window.top !== window.self) {\n        onTopMouseUpListener = addEventListener(window.top, 'mouseup', onMouseUp, false);\n        onTopMouseMoveListener = addEventListener(window.top, 'mousemove', onMouseMove, false);\n      }\n    } catch (error) {\n      /* istanbul ignore next */\n      warning(false, \"[rc-image] \".concat(error));\n    }\n\n    return function () {\n      var _onTopMouseUpListener, _onTopMouseMoveListen;\n\n      onMouseUpListener.remove();\n      onMouseMoveListener.remove();\n      onKeyDownListener.remove();\n      /* istanbul ignore next */\n\n      (_onTopMouseUpListener = onTopMouseUpListener) === null || _onTopMouseUpListener === void 0 ? void 0 : _onTopMouseUpListener.remove();\n      /* istanbul ignore next */\n\n      (_onTopMouseMoveListen = onTopMouseMoveListener) === null || _onTopMouseMoveListen === void 0 ? void 0 : _onTopMouseMoveListen.remove();\n    };\n  }, [visible, isMoving, onKeyDown]);\n  return (\n    /*#__PURE__*/\n    React.createElement(React.Fragment, null,\n    /*#__PURE__*/\n    React.createElement(Dialog, _extends({\n      transitionName: transitionName,\n      maskTransitionName: maskTransitionName,\n      closable: false,\n      keyboard: true,\n      prefixCls: prefixCls,\n      onClose: onClose,\n      visible: visible,\n      wrapClassName: wrapClassName,\n      rootClassName: rootClassName,\n      getContainer: getContainer\n    }, restProps, {\n      afterClose: onAfterClose\n    }),\n    /*#__PURE__*/\n    React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-img-wrapper\")\n    },\n    /*#__PURE__*/\n    React.createElement(\"img\", {\n      width: props.width,\n      height: props.height,\n      onWheel: onWheel,\n      onMouseDown: onMouseDown,\n      onDoubleClick: onDoubleClick,\n      ref: imgRef,\n      className: \"\".concat(prefixCls, \"-img\"),\n      src: combinationSrc,\n      alt: alt,\n      style: {\n        transform: \"translate3d(\".concat(transform.x, \"px, \").concat(transform.y, \"px, 0) scale3d(\").concat(transform.flipX ? '-' : '').concat(scale, \", \").concat(transform.flipY ? '-' : '').concat(scale, \", 1) rotate(\").concat(rotate, \"deg)\"),\n        transitionDuration: !enableTransition && '0s'\n      }\n    }))),\n    /*#__PURE__*/\n    React.createElement(Operations, {\n      visible: visible,\n      maskTransitionName: maskTransitionName,\n      getContainer: getContainer,\n      prefixCls: prefixCls,\n      rootClassName: rootClassName,\n      icons: icons,\n      countRender: countRender,\n      showSwitch: showLeftOrRightSwitches,\n      showProgress: showOperationsProgress,\n      current: currentPreviewIndex,\n      count: previewGroupCount,\n      scale: scale,\n      onSwitchLeft: onSwitchLeft,\n      onSwitchRight: onSwitchRight,\n      onZoomIn: onZoomIn,\n      onZoomOut: onZoomOut,\n      onRotateRight: onRotateRight,\n      onRotateLeft: onRotateLeft,\n      onFlipX: onFlipX,\n      onFlipY: onFlipY,\n      onClose: onClose\n    }))\n  );\n};\n\nexport default Preview;","map":{"version":3,"sources":["C:/Users/ADMIN/Downloads/New folder/portfolio/react-portfolio-master/node_modules/rc-image/es/Preview.js"],"names":["_extends","_objectSpread","_defineProperty","_slicedToArray","_objectWithoutProperties","_excluded","classnames","Dialog","addEventListener","KeyCode","warning","React","useCallback","useContext","useEffect","useRef","useState","getFixScaleEleTransPosition","useImageTransform","Operations","BASE_SCALE_RATIO","WHEEL_MAX_SCALE_RATIO","context","Preview","props","prefixCls","src","alt","onClose","visible","_props$icons","icons","rootClassName","getContainer","countRender","_props$scaleStep","scaleStep","_props$transitionName","transitionName","_props$maskTransition","maskTransitionName","restProps","imgRef","downPositionRef","deltaX","deltaY","transformX","transformY","_useState","_useState2","isMoving","setMoving","_useContext","previewUrls","current","isPreviewGroup","setCurrent","previewGroupCount","size","previewUrlsKeys","Array","from","keys","currentPreviewIndex","indexOf","combinationSrc","get","showLeftOrRightSwitches","showOperationsProgress","_useImageTransform","transform","resetTransform","updateTransform","dispatchZoomChange","_useState3","_useState4","enableTransition","setEnableTransition","rotate","scale","wrapClassName","concat","onAfterClose","onZoomIn","onZoomOut","onRotateRight","onRotateLeft","onFlipX","flipX","onFlipY","flipY","onSwitchLeft","event","preventDefault","stopPropagation","onSwitchRight","onMouseUp","_downPositionRef$curr","hasChangedPosition","x","y","width","offsetWidth","height","offsetHeight","_imgRef$current$getBo","getBoundingClientRect","left","top","isRotate","fixState","onMouseDown","button","pageX","pageY","onMouseMove","onWheel","scaleRatio","Math","abs","mergedScaleRatio","min","ratio","clientX","clientY","onKeyDown","keyCode","LEFT","RIGHT","onDoubleClick","onTopMouseUpListener","onTopMouseMoveListener","onMouseUpListener","window","onMouseMoveListener","onKeyDownListener","self","error","_onTopMouseUpListener","_onTopMouseMoveListen","remove","createElement","Fragment","closable","keyboard","afterClose","className","ref","style","transitionDuration","showSwitch","showProgress","count"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,oCAArB;AACA,OAAOC,aAAP,MAA0B,0CAA1B;AACA,OAAOC,eAAP,MAA4B,2CAA5B;AACA,OAAOC,cAAP,MAA2B,0CAA3B;AACA,OAAOC,wBAAP,MAAqC,oDAArC;AACA,IAAIC,SAAS,GAAG,CAAC,WAAD,EAAc,KAAd,EAAqB,KAArB,EAA4B,SAA5B,EAAuC,SAAvC,EAAkD,OAAlD,EAA2D,eAA3D,EAA4E,cAA5E,EAA4F,aAA5F,EAA2G,WAA3G,EAAwH,gBAAxH,EAA0I,oBAA1I,CAAhB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,gBAAP,MAA6B,iCAA7B;AACA,OAAOC,OAAP,MAAoB,oBAApB;AACA,SAASC,OAAT,QAAwB,oBAAxB;AACA,OAAOC,KAAP,IAAgBC,WAAhB,EAA6BC,UAA7B,EAAyCC,SAAzC,EAAoDC,MAApD,EAA4DC,QAA5D,QAA4E,OAA5E;AACA,OAAOC,2BAAP,MAAwC,+BAAxC;AACA,OAAOC,iBAAP,MAA8B,2BAA9B;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,SAASC,gBAAT,EAA2BC,qBAA3B,QAAwD,iBAAxD;AACA,SAASC,OAAT,QAAwB,gBAAxB;;AACA,IAAIC,OAAO,GAAG,SAASA,OAAT,CAAiBC,KAAjB,EAAwB;AACpC,MAAIC,SAAS,GAAGD,KAAK,CAACC,SAAtB;AAAA,MACEC,GAAG,GAAGF,KAAK,CAACE,GADd;AAAA,MAEEC,GAAG,GAAGH,KAAK,CAACG,GAFd;AAAA,MAGEC,OAAO,GAAGJ,KAAK,CAACI,OAHlB;AAAA,MAIEC,OAAO,GAAGL,KAAK,CAACK,OAJlB;AAAA,MAKEC,YAAY,GAAGN,KAAK,CAACO,KALvB;AAAA,MAMEA,KAAK,GAAGD,YAAY,KAAK,KAAK,CAAtB,GAA0B,EAA1B,GAA+BA,YANzC;AAAA,MAOEE,aAAa,GAAGR,KAAK,CAACQ,aAPxB;AAAA,MAQEC,YAAY,GAAGT,KAAK,CAACS,YARvB;AAAA,MASEC,WAAW,GAAGV,KAAK,CAACU,WATtB;AAAA,MAUEC,gBAAgB,GAAGX,KAAK,CAACY,SAV3B;AAAA,MAWEA,SAAS,GAAGD,gBAAgB,KAAK,KAAK,CAA1B,GAA8B,GAA9B,GAAoCA,gBAXlD;AAAA,MAYEE,qBAAqB,GAAGb,KAAK,CAACc,cAZhC;AAAA,MAaEA,cAAc,GAAGD,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,MAAnC,GAA4CA,qBAb/D;AAAA,MAcEE,qBAAqB,GAAGf,KAAK,CAACgB,kBAdhC;AAAA,MAeEA,kBAAkB,GAAGD,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,MAAnC,GAA4CA,qBAfnE;AAAA,MAgBEE,SAAS,GAAGrC,wBAAwB,CAACoB,KAAD,EAAQnB,SAAR,CAhBtC;;AAiBA,MAAIqC,MAAM,GAAG3B,MAAM,EAAnB;AACA,MAAI4B,eAAe,GAAG5B,MAAM,CAAC;AAC3B6B,IAAAA,MAAM,EAAE,CADmB;AAE3BC,IAAAA,MAAM,EAAE,CAFmB;AAG3BC,IAAAA,UAAU,EAAE,CAHe;AAI3BC,IAAAA,UAAU,EAAE;AAJe,GAAD,CAA5B;;AAMA,MAAIC,SAAS,GAAGhC,QAAQ,CAAC,KAAD,CAAxB;AAAA,MACEiC,UAAU,GAAG9C,cAAc,CAAC6C,SAAD,EAAY,CAAZ,CAD7B;AAAA,MAEEE,QAAQ,GAAGD,UAAU,CAAC,CAAD,CAFvB;AAAA,MAGEE,SAAS,GAAGF,UAAU,CAAC,CAAD,CAHxB;;AAIA,MAAIG,WAAW,GAAGvC,UAAU,CAACS,OAAD,CAA5B;AAAA,MACE+B,WAAW,GAAGD,WAAW,CAACC,WAD5B;AAAA,MAEEC,OAAO,GAAGF,WAAW,CAACE,OAFxB;AAAA,MAGEC,cAAc,GAAGH,WAAW,CAACG,cAH/B;AAAA,MAIEC,UAAU,GAAGJ,WAAW,CAACI,UAJ3B;;AAKA,MAAIC,iBAAiB,GAAGJ,WAAW,CAACK,IAApC;AACA,MAAIC,eAAe,GAAGC,KAAK,CAACC,IAAN,CAAWR,WAAW,CAACS,IAAZ,EAAX,CAAtB;AACA,MAAIC,mBAAmB,GAAGJ,eAAe,CAACK,OAAhB,CAAwBV,OAAxB,CAA1B;AACA,MAAIW,cAAc,GAAGV,cAAc,GAAGF,WAAW,CAACa,GAAZ,CAAgBZ,OAAhB,CAAH,GAA8B5B,GAAjE;AACA,MAAIyC,uBAAuB,GAAGZ,cAAc,IAAIE,iBAAiB,GAAG,CAApE;AACA,MAAIW,sBAAsB,GAAGb,cAAc,IAAIE,iBAAiB,IAAI,CAApE;;AACA,MAAIY,kBAAkB,GAAGnD,iBAAiB,CAACwB,MAAD,CAA1C;AAAA,MACE4B,SAAS,GAAGD,kBAAkB,CAACC,SADjC;AAAA,MAEEC,cAAc,GAAGF,kBAAkB,CAACE,cAFtC;AAAA,MAGEC,eAAe,GAAGH,kBAAkB,CAACG,eAHvC;AAAA,MAIEC,kBAAkB,GAAGJ,kBAAkB,CAACI,kBAJ1C;;AAKA,MAAIC,UAAU,GAAG1D,QAAQ,CAAC,IAAD,CAAzB;AAAA,MACE2D,UAAU,GAAGxE,cAAc,CAACuE,UAAD,EAAa,CAAb,CAD7B;AAAA,MAEEE,gBAAgB,GAAGD,UAAU,CAAC,CAAD,CAF/B;AAAA,MAGEE,mBAAmB,GAAGF,UAAU,CAAC,CAAD,CAHlC;;AAIA,MAAIG,MAAM,GAAGR,SAAS,CAACQ,MAAvB;AAAA,MACEC,KAAK,GAAGT,SAAS,CAACS,KADpB;AAEA,MAAIC,aAAa,GAAG1E,UAAU,CAACJ,eAAe,CAAC,EAAD,EAAK,GAAG+E,MAAH,CAAUxD,SAAV,EAAqB,SAArB,CAAL,EAAsCyB,QAAtC,CAAhB,CAA9B;AACApC,EAAAA,SAAS,CAAC,YAAY;AACpB,QAAI,CAAC8D,gBAAL,EAAuB;AACrBC,MAAAA,mBAAmB,CAAC,IAAD,CAAnB;AACD;AACF,GAJQ,EAIN,CAACD,gBAAD,CAJM,CAAT;;AAKA,MAAIM,YAAY,GAAG,SAASA,YAAT,GAAwB;AACzCX,IAAAA,cAAc;AACf,GAFD;;AAGA,MAAIY,QAAQ,GAAG,SAASA,QAAT,GAAoB;AACjCV,IAAAA,kBAAkB,CAACrD,gBAAgB,GAAGgB,SAApB,CAAlB;AACD,GAFD;;AAGA,MAAIgD,SAAS,GAAG,SAASA,SAAT,GAAqB;AACnCX,IAAAA,kBAAkB,CAACrD,gBAAgB,GAAGgB,SAApB,CAAlB;AACD,GAFD;;AAGA,MAAIiD,aAAa,GAAG,SAASA,aAAT,GAAyB;AAC3Cb,IAAAA,eAAe,CAAC;AACdM,MAAAA,MAAM,EAAEA,MAAM,GAAG;AADH,KAAD,CAAf;AAGD,GAJD;;AAKA,MAAIQ,YAAY,GAAG,SAASA,YAAT,GAAwB;AACzCd,IAAAA,eAAe,CAAC;AACdM,MAAAA,MAAM,EAAEA,MAAM,GAAG;AADH,KAAD,CAAf;AAGD,GAJD;;AAKA,MAAIS,OAAO,GAAG,SAASA,OAAT,GAAmB;AAC/Bf,IAAAA,eAAe,CAAC;AACdgB,MAAAA,KAAK,EAAE,CAAClB,SAAS,CAACkB;AADJ,KAAD,CAAf;AAGD,GAJD;;AAKA,MAAIC,OAAO,GAAG,SAASA,OAAT,GAAmB;AAC/BjB,IAAAA,eAAe,CAAC;AACdkB,MAAAA,KAAK,EAAE,CAACpB,SAAS,CAACoB;AADJ,KAAD,CAAf;AAGD,GAJD;;AAKA,MAAIC,YAAY,GAAG,SAASA,YAAT,CAAsBC,KAAtB,EAA6B;AAC9CA,IAAAA,KAAK,CAACC,cAAN;AACAD,IAAAA,KAAK,CAACE,eAAN;;AACA,QAAI/B,mBAAmB,GAAG,CAA1B,EAA6B;AAC3Bc,MAAAA,mBAAmB,CAAC,KAAD,CAAnB;AACAN,MAAAA,cAAc;AACdf,MAAAA,UAAU,CAACG,eAAe,CAACI,mBAAmB,GAAG,CAAvB,CAAhB,CAAV;AACD;AACF,GARD;;AASA,MAAIgC,aAAa,GAAG,SAASA,aAAT,CAAuBH,KAAvB,EAA8B;AAChDA,IAAAA,KAAK,CAACC,cAAN;AACAD,IAAAA,KAAK,CAACE,eAAN;;AACA,QAAI/B,mBAAmB,GAAGN,iBAAiB,GAAG,CAA9C,EAAiD;AAC/CoB,MAAAA,mBAAmB,CAAC,KAAD,CAAnB;AACAN,MAAAA,cAAc;AACdf,MAAAA,UAAU,CAACG,eAAe,CAACI,mBAAmB,GAAG,CAAvB,CAAhB,CAAV;AACD;AACF,GARD;;AASA,MAAIiC,SAAS,GAAG,SAASA,SAAT,GAAqB;AACnC,QAAInE,OAAO,IAAIqB,QAAf,EAAyB;AACvBC,MAAAA,SAAS,CAAC,KAAD,CAAT;AAEA;;AACA,UAAI8C,qBAAqB,GAAGtD,eAAe,CAACW,OAA5C;AAAA,UACER,UAAU,GAAGmD,qBAAqB,CAACnD,UADrC;AAAA,UAEEC,UAAU,GAAGkD,qBAAqB,CAAClD,UAFrC;AAGA,UAAImD,kBAAkB,GAAG5B,SAAS,CAAC6B,CAAV,KAAgBrD,UAAhB,IAA8BwB,SAAS,CAAC8B,CAAV,KAAgBrD,UAAvE;;AACA,UAAI,CAACmD,kBAAL,EAAyB;AACvB;AACD;;AACD,UAAIG,KAAK,GAAG3D,MAAM,CAACY,OAAP,CAAegD,WAAf,GAA6BvB,KAAzC;AACA,UAAIwB,MAAM,GAAG7D,MAAM,CAACY,OAAP,CAAekD,YAAf,GAA8BzB,KAA3C,CAZuB,CAavB;;AACA,UAAI0B,qBAAqB,GAAG/D,MAAM,CAACY,OAAP,CAAeoD,qBAAf,EAA5B;AAAA,UACEC,IAAI,GAAGF,qBAAqB,CAACE,IAD/B;AAAA,UAEEC,GAAG,GAAGH,qBAAqB,CAACG,GAF9B;;AAGA,UAAIC,QAAQ,GAAG/B,MAAM,GAAG,GAAT,KAAiB,CAAhC;AACA,UAAIgC,QAAQ,GAAG7F,2BAA2B,CAAC4F,QAAQ,GAAGN,MAAH,GAAYF,KAArB,EAA4BQ,QAAQ,GAAGR,KAAH,GAAWE,MAA/C,EAAuDI,IAAvD,EAA6DC,GAA7D,CAA1C;;AACA,UAAIE,QAAJ,EAAc;AACZtC,QAAAA,eAAe,CAACvE,aAAa,CAAC,EAAD,EAAK6G,QAAL,CAAd,CAAf;AACD;AACF;AACF,GAxBD;;AAyBA,MAAIC,WAAW,GAAG,SAASA,WAAT,CAAqBnB,KAArB,EAA4B;AAC5C;AACA,QAAIA,KAAK,CAACoB,MAAN,KAAiB,CAArB,EAAwB;AACxBpB,IAAAA,KAAK,CAACC,cAAN;AACAD,IAAAA,KAAK,CAACE,eAAN;AACAnD,IAAAA,eAAe,CAACW,OAAhB,GAA0B;AACxBV,MAAAA,MAAM,EAAEgD,KAAK,CAACqB,KAAN,GAAc3C,SAAS,CAAC6B,CADR;AAExBtD,MAAAA,MAAM,EAAE+C,KAAK,CAACsB,KAAN,GAAc5C,SAAS,CAAC8B,CAFR;AAGxBtD,MAAAA,UAAU,EAAEwB,SAAS,CAAC6B,CAHE;AAIxBpD,MAAAA,UAAU,EAAEuB,SAAS,CAAC8B;AAJE,KAA1B;AAMAjD,IAAAA,SAAS,CAAC,IAAD,CAAT;AACD,GAZD;;AAaA,MAAIgE,WAAW,GAAG,SAASA,WAAT,CAAqBvB,KAArB,EAA4B;AAC5C,QAAI/D,OAAO,IAAIqB,QAAf,EAAyB;AACvBsB,MAAAA,eAAe,CAAC;AACd2B,QAAAA,CAAC,EAAEP,KAAK,CAACqB,KAAN,GAActE,eAAe,CAACW,OAAhB,CAAwBV,MAD3B;AAEdwD,QAAAA,CAAC,EAAER,KAAK,CAACsB,KAAN,GAAcvE,eAAe,CAACW,OAAhB,CAAwBT;AAF3B,OAAD,CAAf;AAID;AACF,GAPD;;AAQA,MAAIuE,OAAO,GAAG,SAASA,OAAT,CAAiBxB,KAAjB,EAAwB;AACpC,QAAI,CAAC/D,OAAD,IAAY+D,KAAK,CAAC/C,MAAN,IAAgB,CAAhC,EAAmC,OADC,CAEpC;;AACA,QAAIwE,UAAU,GAAGC,IAAI,CAACC,GAAL,CAAS3B,KAAK,CAAC/C,MAAN,GAAe,GAAxB,CAAjB,CAHoC,CAIpC;;AACA,QAAI2E,gBAAgB,GAAGF,IAAI,CAACG,GAAL,CAASJ,UAAT,EAAqBhG,qBAArB,CAAvB,CALoC,CAMpC;;AACA,QAAIqG,KAAK,GAAGtG,gBAAgB,GAAGoG,gBAAgB,GAAGpF,SAAlD;;AACA,QAAIwD,KAAK,CAAC/C,MAAN,GAAe,CAAnB,EAAsB;AACpB6E,MAAAA,KAAK,GAAGtG,gBAAgB,GAAGsG,KAA3B;AACD;;AACDjD,IAAAA,kBAAkB,CAACiD,KAAD,EAAQ9B,KAAK,CAAC+B,OAAd,EAAuB/B,KAAK,CAACgC,OAA7B,CAAlB;AACD,GAZD;;AAaA,MAAIC,SAAS,GAAGjH,WAAW,CAAC,UAAUgF,KAAV,EAAiB;AAC3C,QAAI,CAAC/D,OAAD,IAAY,CAACsC,uBAAjB,EAA0C;;AAC1C,QAAIyB,KAAK,CAACkC,OAAN,KAAkBrH,OAAO,CAACsH,IAA9B,EAAoC;AAClC,UAAIhE,mBAAmB,GAAG,CAA1B,EAA6B;AAC3BP,QAAAA,UAAU,CAACG,eAAe,CAACI,mBAAmB,GAAG,CAAvB,CAAhB,CAAV;AACD;AACF,KAJD,MAIO,IAAI6B,KAAK,CAACkC,OAAN,KAAkBrH,OAAO,CAACuH,KAA9B,EAAqC;AAC1C,UAAIjE,mBAAmB,GAAGN,iBAAiB,GAAG,CAA9C,EAAiD;AAC/CD,QAAAA,UAAU,CAACG,eAAe,CAACI,mBAAmB,GAAG,CAAvB,CAAhB,CAAV;AACD;AACF;AACF,GAX0B,EAWxB,CAACA,mBAAD,EAAsBN,iBAAtB,EAAyCE,eAAzC,EAA0DH,UAA1D,EAAsEW,uBAAtE,EAA+FtC,OAA/F,CAXwB,CAA3B;;AAYA,MAAIoG,aAAa,GAAG,SAASA,aAAT,CAAuBrC,KAAvB,EAA8B;AAChD,QAAI/D,OAAJ,EAAa;AACX,UAAIkD,KAAK,KAAK,CAAd,EAAiB;AACfP,QAAAA,eAAe,CAAC;AACd2B,UAAAA,CAAC,EAAE,CADW;AAEdC,UAAAA,CAAC,EAAE,CAFW;AAGdrB,UAAAA,KAAK,EAAE;AAHO,SAAD,CAAf;AAKD,OAND,MAMO;AACLN,QAAAA,kBAAkB,CAACrD,gBAAgB,GAAGgB,SAApB,EAA+BwD,KAAK,CAAC+B,OAArC,EAA8C/B,KAAK,CAACgC,OAApD,CAAlB;AACD;AACF;AACF,GAZD;;AAaA9G,EAAAA,SAAS,CAAC,YAAY;AACpB,QAAIoH,oBAAJ;AACA,QAAIC,sBAAJ;AACA,QAAIC,iBAAiB,GAAG5H,gBAAgB,CAAC6H,MAAD,EAAS,SAAT,EAAoBrC,SAApB,EAA+B,KAA/B,CAAxC;AACA,QAAIsC,mBAAmB,GAAG9H,gBAAgB,CAAC6H,MAAD,EAAS,WAAT,EAAsBlB,WAAtB,EAAmC,KAAnC,CAA1C;AACA,QAAIoB,iBAAiB,GAAG/H,gBAAgB,CAAC6H,MAAD,EAAS,SAAT,EAAoBR,SAApB,EAA+B,KAA/B,CAAxC;;AACA,QAAI;AACF;;AACA;AACA,UAAIQ,MAAM,CAACzB,GAAP,KAAeyB,MAAM,CAACG,IAA1B,EAAgC;AAC9BN,QAAAA,oBAAoB,GAAG1H,gBAAgB,CAAC6H,MAAM,CAACzB,GAAR,EAAa,SAAb,EAAwBZ,SAAxB,EAAmC,KAAnC,CAAvC;AACAmC,QAAAA,sBAAsB,GAAG3H,gBAAgB,CAAC6H,MAAM,CAACzB,GAAR,EAAa,WAAb,EAA0BO,WAA1B,EAAuC,KAAvC,CAAzC;AACD;AACF,KAPD,CAOE,OAAOsB,KAAP,EAAc;AACd;AACA/H,MAAAA,OAAO,CAAC,KAAD,EAAQ,cAAcuE,MAAd,CAAqBwD,KAArB,CAAR,CAAP;AACD;;AACD,WAAO,YAAY;AACjB,UAAIC,qBAAJ,EAA2BC,qBAA3B;;AACAP,MAAAA,iBAAiB,CAACQ,MAAlB;AACAN,MAAAA,mBAAmB,CAACM,MAApB;AACAL,MAAAA,iBAAiB,CAACK,MAAlB;AACA;;AACA,OAACF,qBAAqB,GAAGR,oBAAzB,MAAmD,IAAnD,IAA2DQ,qBAAqB,KAAK,KAAK,CAA1F,GAA8F,KAAK,CAAnG,GAAuGA,qBAAqB,CAACE,MAAtB,EAAvG;AACA;;AACA,OAACD,qBAAqB,GAAGR,sBAAzB,MAAqD,IAArD,IAA6DQ,qBAAqB,KAAK,KAAK,CAA5F,GAAgG,KAAK,CAArG,GAAyGA,qBAAqB,CAACC,MAAtB,EAAzG;AACD,KATD;AAUD,GA3BQ,EA2BN,CAAC/G,OAAD,EAAUqB,QAAV,EAAoB2E,SAApB,CA3BM,CAAT;AA4BA;AAAO;AAAalH,IAAAA,KAAK,CAACkI,aAAN,CAAoBlI,KAAK,CAACmI,QAA1B,EAAoC,IAApC;AAA0C;AAAanI,IAAAA,KAAK,CAACkI,aAAN,CAAoBtI,MAApB,EAA4BP,QAAQ,CAAC;AAC9GsC,MAAAA,cAAc,EAAEA,cAD8F;AAE9GE,MAAAA,kBAAkB,EAAEA,kBAF0F;AAG9GuG,MAAAA,QAAQ,EAAE,KAHoG;AAI9GC,MAAAA,QAAQ,EAAE,IAJoG;AAK9GvH,MAAAA,SAAS,EAAEA,SALmG;AAM9GG,MAAAA,OAAO,EAAEA,OANqG;AAO9GC,MAAAA,OAAO,EAAEA,OAPqG;AAQ9GmD,MAAAA,aAAa,EAAEA,aAR+F;AAS9GhD,MAAAA,aAAa,EAAEA,aAT+F;AAU9GC,MAAAA,YAAY,EAAEA;AAVgG,KAAD,EAW5GQ,SAX4G,EAWjG;AACZwG,MAAAA,UAAU,EAAE/D;AADA,KAXiG,CAApC;AAavE;AAAavE,IAAAA,KAAK,CAACkI,aAAN,CAAoB,KAApB,EAA2B;AAC1CK,MAAAA,SAAS,EAAE,GAAGjE,MAAH,CAAUxD,SAAV,EAAqB,cAArB;AAD+B,KAA3B;AAEd;AAAad,IAAAA,KAAK,CAACkI,aAAN,CAAoB,KAApB,EAA2B;AACzCxC,MAAAA,KAAK,EAAE7E,KAAK,CAAC6E,KAD4B;AAEzCE,MAAAA,MAAM,EAAE/E,KAAK,CAAC+E,MAF2B;AAGzCa,MAAAA,OAAO,EAAEA,OAHgC;AAIzCL,MAAAA,WAAW,EAAEA,WAJ4B;AAKzCkB,MAAAA,aAAa,EAAEA,aAL0B;AAMzCkB,MAAAA,GAAG,EAAEzG,MANoC;AAOzCwG,MAAAA,SAAS,EAAE,GAAGjE,MAAH,CAAUxD,SAAV,EAAqB,MAArB,CAP8B;AAQzCC,MAAAA,GAAG,EAAEuC,cARoC;AASzCtC,MAAAA,GAAG,EAAEA,GAToC;AAUzCyH,MAAAA,KAAK,EAAE;AACL9E,QAAAA,SAAS,EAAE,eAAeW,MAAf,CAAsBX,SAAS,CAAC6B,CAAhC,EAAmC,MAAnC,EAA2ClB,MAA3C,CAAkDX,SAAS,CAAC8B,CAA5D,EAA+D,iBAA/D,EAAkFnB,MAAlF,CAAyFX,SAAS,CAACkB,KAAV,GAAkB,GAAlB,GAAwB,EAAjH,EAAqHP,MAArH,CAA4HF,KAA5H,EAAmI,IAAnI,EAAyIE,MAAzI,CAAgJX,SAAS,CAACoB,KAAV,GAAkB,GAAlB,GAAwB,EAAxK,EAA4KT,MAA5K,CAAmLF,KAAnL,EAA0L,cAA1L,EAA0ME,MAA1M,CAAiNH,MAAjN,EAAyN,MAAzN,CADN;AAELuE,QAAAA,kBAAkB,EAAE,CAACzE,gBAAD,IAAqB;AAFpC;AAVkC,KAA3B,CAFC,CAb0D,CAAvD;AA6Bd;AAAajE,IAAAA,KAAK,CAACkI,aAAN,CAAoB1H,UAApB,EAAgC;AACjDU,MAAAA,OAAO,EAAEA,OADwC;AAEjDW,MAAAA,kBAAkB,EAAEA,kBAF6B;AAGjDP,MAAAA,YAAY,EAAEA,YAHmC;AAIjDR,MAAAA,SAAS,EAAEA,SAJsC;AAKjDO,MAAAA,aAAa,EAAEA,aALkC;AAMjDD,MAAAA,KAAK,EAAEA,KAN0C;AAOjDG,MAAAA,WAAW,EAAEA,WAPoC;AAQjDoH,MAAAA,UAAU,EAAEnF,uBARqC;AASjDoF,MAAAA,YAAY,EAAEnF,sBATmC;AAUjDd,MAAAA,OAAO,EAAES,mBAVwC;AAWjDyF,MAAAA,KAAK,EAAE/F,iBAX0C;AAYjDsB,MAAAA,KAAK,EAAEA,KAZ0C;AAajDY,MAAAA,YAAY,EAAEA,YAbmC;AAcjDI,MAAAA,aAAa,EAAEA,aAdkC;AAejDZ,MAAAA,QAAQ,EAAEA,QAfuC;AAgBjDC,MAAAA,SAAS,EAAEA,SAhBsC;AAiBjDC,MAAAA,aAAa,EAAEA,aAjBkC;AAkBjDC,MAAAA,YAAY,EAAEA,YAlBmC;AAmBjDC,MAAAA,OAAO,EAAEA,OAnBwC;AAoBjDE,MAAAA,OAAO,EAAEA,OApBwC;AAqBjD7D,MAAAA,OAAO,EAAEA;AArBwC,KAAhC,CA7BC;AAApB;AAoDD,CA5QD;;AA6QA,eAAeL,OAAf","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"prefixCls\", \"src\", \"alt\", \"onClose\", \"visible\", \"icons\", \"rootClassName\", \"getContainer\", \"countRender\", \"scaleStep\", \"transitionName\", \"maskTransitionName\"];\nimport classnames from 'classnames';\nimport Dialog from 'rc-dialog';\nimport addEventListener from \"rc-util/es/Dom/addEventListener\";\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport { warning } from \"rc-util/es/warning\";\nimport React, { useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport getFixScaleEleTransPosition from \"./getFixScaleEleTransPosition\";\nimport useImageTransform from \"./hooks/useImageTransform\";\nimport Operations from \"./Operations\";\nimport { BASE_SCALE_RATIO, WHEEL_MAX_SCALE_RATIO } from \"./previewConfig\";\nimport { context } from \"./PreviewGroup\";\nvar Preview = function Preview(props) {\n  var prefixCls = props.prefixCls,\n    src = props.src,\n    alt = props.alt,\n    onClose = props.onClose,\n    visible = props.visible,\n    _props$icons = props.icons,\n    icons = _props$icons === void 0 ? {} : _props$icons,\n    rootClassName = props.rootClassName,\n    getContainer = props.getContainer,\n    countRender = props.countRender,\n    _props$scaleStep = props.scaleStep,\n    scaleStep = _props$scaleStep === void 0 ? 0.5 : _props$scaleStep,\n    _props$transitionName = props.transitionName,\n    transitionName = _props$transitionName === void 0 ? 'zoom' : _props$transitionName,\n    _props$maskTransition = props.maskTransitionName,\n    maskTransitionName = _props$maskTransition === void 0 ? 'fade' : _props$maskTransition,\n    restProps = _objectWithoutProperties(props, _excluded);\n  var imgRef = useRef();\n  var downPositionRef = useRef({\n    deltaX: 0,\n    deltaY: 0,\n    transformX: 0,\n    transformY: 0\n  });\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isMoving = _useState2[0],\n    setMoving = _useState2[1];\n  var _useContext = useContext(context),\n    previewUrls = _useContext.previewUrls,\n    current = _useContext.current,\n    isPreviewGroup = _useContext.isPreviewGroup,\n    setCurrent = _useContext.setCurrent;\n  var previewGroupCount = previewUrls.size;\n  var previewUrlsKeys = Array.from(previewUrls.keys());\n  var currentPreviewIndex = previewUrlsKeys.indexOf(current);\n  var combinationSrc = isPreviewGroup ? previewUrls.get(current) : src;\n  var showLeftOrRightSwitches = isPreviewGroup && previewGroupCount > 1;\n  var showOperationsProgress = isPreviewGroup && previewGroupCount >= 1;\n  var _useImageTransform = useImageTransform(imgRef),\n    transform = _useImageTransform.transform,\n    resetTransform = _useImageTransform.resetTransform,\n    updateTransform = _useImageTransform.updateTransform,\n    dispatchZoomChange = _useImageTransform.dispatchZoomChange;\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    enableTransition = _useState4[0],\n    setEnableTransition = _useState4[1];\n  var rotate = transform.rotate,\n    scale = transform.scale;\n  var wrapClassName = classnames(_defineProperty({}, \"\".concat(prefixCls, \"-moving\"), isMoving));\n  useEffect(function () {\n    if (!enableTransition) {\n      setEnableTransition(true);\n    }\n  }, [enableTransition]);\n  var onAfterClose = function onAfterClose() {\n    resetTransform();\n  };\n  var onZoomIn = function onZoomIn() {\n    dispatchZoomChange(BASE_SCALE_RATIO + scaleStep);\n  };\n  var onZoomOut = function onZoomOut() {\n    dispatchZoomChange(BASE_SCALE_RATIO - scaleStep);\n  };\n  var onRotateRight = function onRotateRight() {\n    updateTransform({\n      rotate: rotate + 90\n    });\n  };\n  var onRotateLeft = function onRotateLeft() {\n    updateTransform({\n      rotate: rotate - 90\n    });\n  };\n  var onFlipX = function onFlipX() {\n    updateTransform({\n      flipX: !transform.flipX\n    });\n  };\n  var onFlipY = function onFlipY() {\n    updateTransform({\n      flipY: !transform.flipY\n    });\n  };\n  var onSwitchLeft = function onSwitchLeft(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    if (currentPreviewIndex > 0) {\n      setEnableTransition(false);\n      resetTransform();\n      setCurrent(previewUrlsKeys[currentPreviewIndex - 1]);\n    }\n  };\n  var onSwitchRight = function onSwitchRight(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    if (currentPreviewIndex < previewGroupCount - 1) {\n      setEnableTransition(false);\n      resetTransform();\n      setCurrent(previewUrlsKeys[currentPreviewIndex + 1]);\n    }\n  };\n  var onMouseUp = function onMouseUp() {\n    if (visible && isMoving) {\n      setMoving(false);\n\n      /** No need to restore the position when the picture is not moved, So as not to interfere with the click */\n      var _downPositionRef$curr = downPositionRef.current,\n        transformX = _downPositionRef$curr.transformX,\n        transformY = _downPositionRef$curr.transformY;\n      var hasChangedPosition = transform.x !== transformX && transform.y !== transformY;\n      if (!hasChangedPosition) {\n        return;\n      }\n      var width = imgRef.current.offsetWidth * scale;\n      var height = imgRef.current.offsetHeight * scale;\n      // eslint-disable-next-line @typescript-eslint/no-shadow\n      var _imgRef$current$getBo = imgRef.current.getBoundingClientRect(),\n        left = _imgRef$current$getBo.left,\n        top = _imgRef$current$getBo.top;\n      var isRotate = rotate % 180 !== 0;\n      var fixState = getFixScaleEleTransPosition(isRotate ? height : width, isRotate ? width : height, left, top);\n      if (fixState) {\n        updateTransform(_objectSpread({}, fixState));\n      }\n    }\n  };\n  var onMouseDown = function onMouseDown(event) {\n    // Only allow main button\n    if (event.button !== 0) return;\n    event.preventDefault();\n    event.stopPropagation();\n    downPositionRef.current = {\n      deltaX: event.pageX - transform.x,\n      deltaY: event.pageY - transform.y,\n      transformX: transform.x,\n      transformY: transform.y\n    };\n    setMoving(true);\n  };\n  var onMouseMove = function onMouseMove(event) {\n    if (visible && isMoving) {\n      updateTransform({\n        x: event.pageX - downPositionRef.current.deltaX,\n        y: event.pageY - downPositionRef.current.deltaY\n      });\n    }\n  };\n  var onWheel = function onWheel(event) {\n    if (!visible || event.deltaY == 0) return;\n    // Scale ratio depends on the deltaY size\n    var scaleRatio = Math.abs(event.deltaY / 100);\n    // Limit the maximum scale ratio\n    var mergedScaleRatio = Math.min(scaleRatio, WHEEL_MAX_SCALE_RATIO);\n    // Scale the ratio each time\n    var ratio = BASE_SCALE_RATIO + mergedScaleRatio * scaleStep;\n    if (event.deltaY > 0) {\n      ratio = BASE_SCALE_RATIO / ratio;\n    }\n    dispatchZoomChange(ratio, event.clientX, event.clientY);\n  };\n  var onKeyDown = useCallback(function (event) {\n    if (!visible || !showLeftOrRightSwitches) return;\n    if (event.keyCode === KeyCode.LEFT) {\n      if (currentPreviewIndex > 0) {\n        setCurrent(previewUrlsKeys[currentPreviewIndex - 1]);\n      }\n    } else if (event.keyCode === KeyCode.RIGHT) {\n      if (currentPreviewIndex < previewGroupCount - 1) {\n        setCurrent(previewUrlsKeys[currentPreviewIndex + 1]);\n      }\n    }\n  }, [currentPreviewIndex, previewGroupCount, previewUrlsKeys, setCurrent, showLeftOrRightSwitches, visible]);\n  var onDoubleClick = function onDoubleClick(event) {\n    if (visible) {\n      if (scale !== 1) {\n        updateTransform({\n          x: 0,\n          y: 0,\n          scale: 1\n        });\n      } else {\n        dispatchZoomChange(BASE_SCALE_RATIO + scaleStep, event.clientX, event.clientY);\n      }\n    }\n  };\n  useEffect(function () {\n    var onTopMouseUpListener;\n    var onTopMouseMoveListener;\n    var onMouseUpListener = addEventListener(window, 'mouseup', onMouseUp, false);\n    var onMouseMoveListener = addEventListener(window, 'mousemove', onMouseMove, false);\n    var onKeyDownListener = addEventListener(window, 'keydown', onKeyDown, false);\n    try {\n      // Resolve if in iframe lost event\n      /* istanbul ignore next */\n      if (window.top !== window.self) {\n        onTopMouseUpListener = addEventListener(window.top, 'mouseup', onMouseUp, false);\n        onTopMouseMoveListener = addEventListener(window.top, 'mousemove', onMouseMove, false);\n      }\n    } catch (error) {\n      /* istanbul ignore next */\n      warning(false, \"[rc-image] \".concat(error));\n    }\n    return function () {\n      var _onTopMouseUpListener, _onTopMouseMoveListen;\n      onMouseUpListener.remove();\n      onMouseMoveListener.remove();\n      onKeyDownListener.remove();\n      /* istanbul ignore next */\n      (_onTopMouseUpListener = onTopMouseUpListener) === null || _onTopMouseUpListener === void 0 ? void 0 : _onTopMouseUpListener.remove();\n      /* istanbul ignore next */\n      (_onTopMouseMoveListen = onTopMouseMoveListener) === null || _onTopMouseMoveListen === void 0 ? void 0 : _onTopMouseMoveListen.remove();\n    };\n  }, [visible, isMoving, onKeyDown]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Dialog, _extends({\n    transitionName: transitionName,\n    maskTransitionName: maskTransitionName,\n    closable: false,\n    keyboard: true,\n    prefixCls: prefixCls,\n    onClose: onClose,\n    visible: visible,\n    wrapClassName: wrapClassName,\n    rootClassName: rootClassName,\n    getContainer: getContainer\n  }, restProps, {\n    afterClose: onAfterClose\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-img-wrapper\")\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    width: props.width,\n    height: props.height,\n    onWheel: onWheel,\n    onMouseDown: onMouseDown,\n    onDoubleClick: onDoubleClick,\n    ref: imgRef,\n    className: \"\".concat(prefixCls, \"-img\"),\n    src: combinationSrc,\n    alt: alt,\n    style: {\n      transform: \"translate3d(\".concat(transform.x, \"px, \").concat(transform.y, \"px, 0) scale3d(\").concat(transform.flipX ? '-' : '').concat(scale, \", \").concat(transform.flipY ? '-' : '').concat(scale, \", 1) rotate(\").concat(rotate, \"deg)\"),\n      transitionDuration: !enableTransition && '0s'\n    }\n  }))), /*#__PURE__*/React.createElement(Operations, {\n    visible: visible,\n    maskTransitionName: maskTransitionName,\n    getContainer: getContainer,\n    prefixCls: prefixCls,\n    rootClassName: rootClassName,\n    icons: icons,\n    countRender: countRender,\n    showSwitch: showLeftOrRightSwitches,\n    showProgress: showOperationsProgress,\n    current: currentPreviewIndex,\n    count: previewGroupCount,\n    scale: scale,\n    onSwitchLeft: onSwitchLeft,\n    onSwitchRight: onSwitchRight,\n    onZoomIn: onZoomIn,\n    onZoomOut: onZoomOut,\n    onRotateRight: onRotateRight,\n    onRotateLeft: onRotateLeft,\n    onFlipX: onFlipX,\n    onFlipY: onFlipY,\n    onClose: onClose\n  }));\n};\nexport default Preview;"]},"metadata":{},"sourceType":"module"}