{"ast":null,"code":"import { warning } from 'rc-util';\nimport { getShadowRoot } from \"rc-util/es/Dom/shadow\";\nimport raf from \"rc-util/es/raf\";\nimport * as React from 'react';\nimport { getWin } from \"../util\";\nexport default function useWinClick(open, clickToHide, targetEle, popupEle, mask, maskClosable, inPopupOrChild, triggerOpen) {\n  var openRef = React.useRef(open); // Window click to hide should be lock to avoid trigger lock immediately\n\n  var lockRef = React.useRef(false);\n\n  if (openRef.current !== open) {\n    lockRef.current = true;\n    openRef.current = open;\n  }\n\n  React.useEffect(function () {\n    var id = raf(function () {\n      lockRef.current = false;\n    });\n    return function () {\n      raf.cancel(id);\n    };\n  }, [open]); // Click to hide is special action since click popup element should not hide\n\n  React.useEffect(function () {\n    if (clickToHide && popupEle && (!mask || maskClosable)) {\n      var clickInside = false; // User may mouseDown inside and drag out of popup and mouse up\n      // Record here to prevent close\n\n      var onWindowMouseDown = function onWindowMouseDown(_ref) {\n        var target = _ref.target;\n        clickInside = inPopupOrChild(target);\n      };\n\n      var onWindowClick = function onWindowClick(_ref2) {\n        var target = _ref2.target;\n\n        if (!lockRef.current && openRef.current && !clickInside && !inPopupOrChild(target)) {\n          triggerOpen(false);\n        }\n      };\n\n      var win = getWin(popupEle);\n      win.addEventListener('mousedown', onWindowMouseDown);\n      win.addEventListener('click', onWindowClick); // shadow root\n\n      var targetShadowRoot = getShadowRoot(targetEle);\n\n      if (targetShadowRoot) {\n        targetShadowRoot.addEventListener('mousedown', onWindowMouseDown);\n        targetShadowRoot.addEventListener('click', onWindowClick);\n      } // Warning if target and popup not in same root\n\n\n      if (process.env.NODE_ENV !== 'production') {\n        var _targetEle$getRootNod, _popupEle$getRootNode;\n\n        var targetRoot = targetEle === null || targetEle === void 0 ? void 0 : (_targetEle$getRootNod = targetEle.getRootNode) === null || _targetEle$getRootNod === void 0 ? void 0 : _targetEle$getRootNod.call(targetEle);\n        var popupRoot = (_popupEle$getRootNode = popupEle.getRootNode) === null || _popupEle$getRootNode === void 0 ? void 0 : _popupEle$getRootNode.call(popupEle);\n        warning(targetRoot === popupRoot, \"trigger element and popup element should in same shadow root.\");\n      }\n\n      return function () {\n        win.removeEventListener('mousedown', onWindowMouseDown);\n        win.removeEventListener('click', onWindowClick);\n\n        if (targetShadowRoot) {\n          targetShadowRoot.removeEventListener('mousedown', onWindowMouseDown);\n          targetShadowRoot.removeEventListener('click', onWindowClick);\n        }\n      };\n    }\n  }, [clickToHide, targetEle, popupEle, mask, maskClosable]);\n}","map":{"version":3,"sources":["C:/Users/ADMIN/Downloads/New folder/portfolio/react-portfolio-master/node_modules/@rc-component/trigger/es/hooks/useWinClick.js"],"names":["warning","getShadowRoot","raf","React","getWin","useWinClick","open","clickToHide","targetEle","popupEle","mask","maskClosable","inPopupOrChild","triggerOpen","openRef","useRef","lockRef","current","useEffect","id","cancel","clickInside","onWindowMouseDown","_ref","target","onWindowClick","_ref2","win","addEventListener","targetShadowRoot","process","env","NODE_ENV","_targetEle$getRootNod","_popupEle$getRootNode","targetRoot","getRootNode","call","popupRoot","removeEventListener"],"mappings":"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","sourcesContent":["import { warning } from 'rc-util';\nimport { getShadowRoot } from \"rc-util/es/Dom/shadow\";\nimport raf from \"rc-util/es/raf\";\nimport * as React from 'react';\nimport { getWin } from \"../util\";\nexport default function useWinClick(open, clickToHide, targetEle, popupEle, mask, maskClosable, inPopupOrChild, triggerOpen) {\n  var openRef = React.useRef(open);\n\n  // Window click to hide should be lock to avoid trigger lock immediately\n  var lockRef = React.useRef(false);\n  if (openRef.current !== open) {\n    lockRef.current = true;\n    openRef.current = open;\n  }\n  React.useEffect(function () {\n    var id = raf(function () {\n      lockRef.current = false;\n    });\n    return function () {\n      raf.cancel(id);\n    };\n  }, [open]);\n\n  // Click to hide is special action since click popup element should not hide\n  React.useEffect(function () {\n    if (clickToHide && popupEle && (!mask || maskClosable)) {\n      var clickInside = false;\n\n      // User may mouseDown inside and drag out of popup and mouse up\n      // Record here to prevent close\n      var onWindowMouseDown = function onWindowMouseDown(_ref) {\n        var target = _ref.target;\n        clickInside = inPopupOrChild(target);\n      };\n      var onWindowClick = function onWindowClick(_ref2) {\n        var target = _ref2.target;\n        if (!lockRef.current && openRef.current && !clickInside && !inPopupOrChild(target)) {\n          triggerOpen(false);\n        }\n      };\n      var win = getWin(popupEle);\n      win.addEventListener('mousedown', onWindowMouseDown);\n      win.addEventListener('click', onWindowClick);\n\n      // shadow root\n      var targetShadowRoot = getShadowRoot(targetEle);\n      if (targetShadowRoot) {\n        targetShadowRoot.addEventListener('mousedown', onWindowMouseDown);\n        targetShadowRoot.addEventListener('click', onWindowClick);\n      }\n\n      // Warning if target and popup not in same root\n      if (process.env.NODE_ENV !== 'production') {\n        var _targetEle$getRootNod, _popupEle$getRootNode;\n        var targetRoot = targetEle === null || targetEle === void 0 ? void 0 : (_targetEle$getRootNod = targetEle.getRootNode) === null || _targetEle$getRootNod === void 0 ? void 0 : _targetEle$getRootNod.call(targetEle);\n        var popupRoot = (_popupEle$getRootNode = popupEle.getRootNode) === null || _popupEle$getRootNode === void 0 ? void 0 : _popupEle$getRootNode.call(popupEle);\n        warning(targetRoot === popupRoot, \"trigger element and popup element should in same shadow root.\");\n      }\n      return function () {\n        win.removeEventListener('mousedown', onWindowMouseDown);\n        win.removeEventListener('click', onWindowClick);\n        if (targetShadowRoot) {\n          targetShadowRoot.removeEventListener('mousedown', onWindowMouseDown);\n          targetShadowRoot.removeEventListener('click', onWindowClick);\n        }\n      };\n    }\n  }, [clickToHide, targetEle, popupEle, mask, maskClosable]);\n}"]},"metadata":{},"sourceType":"module"}